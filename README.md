# RSSL XML Trace Viewer Tools

The utility was designed for decoding and displaying the value from RSSL XML Tracing log generated by RFA C++/.NET and EMA/ETA C/C++. The main purpose of the project is to create WPF GUI application to display data for [MRN Real-Time News](https://developers.thomsonreuters.com/sites/default/files/ThomsonReutersMRNElektronDataModelsv210_2.pdf) provided by RIC MRN_STORY. Anyway the core functionality of the application can be used to decode value of the field entry data inside XML element. Therefore it can use to open RSSL tracing log which contains data from other message model type such as Market Price, Market By Price and Market By Order. This utility should be able to help troubleshooting data issue or confirm the Market Price data or MRN Real-Time news data that API send and receive from Provider Server or TREP component.

## Prerequisites

Required software components:

* [.NET Framework ](https://www.microsoft.com/net/download/dotnet-framework/net461) - .NET Framework 4.6.1 or later version
* [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/)- We use Visual Studio 2017 to develop WPF GUI applicaiton.

Optional software components:

* [Visual Studio Code](https://code.visualstudio.com/) - IDE for edit source codes and open XML and JSON output from the application.


## Getting Started

The utility can be used on Windows OS only because it uses .NET Framework with WPF library which available for Windows development only. It require Visual Studio 2017 with .NET framework 4.6.1 to build the application. It requires some additional libraries for decoding XML data and parsing the JSON data. The application requires RDMFieldDictionary and enumtype.def to decode the raw data in Hex string format to the actual value. User can update dictionary inside folder Dict to the latest version. In case that the application unable to find field definition for some specific fid or custom fid and enum value, it will instead display original Hex string with the fid id instead of showing fid name. Note that you can download latest version of data dictionary from the [Software Download page](https://customers.thomsonreuters.com/a/support/technical/softwaredownload/default.aspx) and then search for product name "TREP Template service pack".

Anyway if you want the utility which can run on multiple OS such as mac os and linux, we have created console application which can decode and convert the data from RSSL tracing log to a new XML file. It share the core functionality with the GUI project. You can download it from [github](https://github.com/TR-API-Samples/Example.EMARFACPP.Tool.RSSLXMLTraceConverter).

# Overview

The utilities were designed for decoding data inside RSSL XML trace log which generated by RFA C++/.NET and EMA/ETA C/C++ and it can be used to display decoded data in WPF GUI. Basically, the RSSL XML trace file was provided for troubleshooting purpose only. There is some scenario that it required data from the tracing log to confirm data integrity the application received, therefore, there is the requirement to create a tool which can convert field entry value in Hex string format to actual value so that the user can compare the value with data the application received.

Normally when the application requesting data for Market Price and Level 2 Market By Price or Market by Order, the response message usually contains a field entry with field value in Hex string format. The utility can be used to read the XML Fragment and decode the Hex string in the field entry to actual data according the data type from data dictionary. Moreover it can be used to decode the [MRN Real-Time News](https://developers.thomsonreuters.com/article/introduction-machine-readable-news-mrn-elektron-message-api-ema) which provide by using MRN_STORY Ric. The tools have application's logic to scan the XML Fragment to find a series of compressed MRN fragment data inside the tracing log and then unpack the data and shows the MRN JSON data in the GUI.

## Utility download

The solution project is available for from [Github](https://developers.thomsonreuters.com/system/files/xxx.zip).

## How to collect RSSL Tracing log

The RSSL tracing log was provided for troubleshooting purpose and it's not turn on by default. User may use the following instruction to turn on the log in RFA C++/.NET and EMA C++ application. Please note that currently the utility does not support the trace from RFA and EMA java as it can't provide a valid XML trace format. There are some garbage or unexpected text inside the XML fragment and there are mixing between simple log and XML data inside the trace so that it cause the XML parser error. If you want to use the trace log from EMA java with the application, the workaround is to manually remove invalid text or string from XML fragment and save it to a valid xml file.

### RFA C++ and .NET application
User has to add the following configuration to turn on RSSL tracing log. 

```
\Connections\<Connection_RSSL>\connectionType    = "RSSL"
\Connections\<Connection_RSSL>\rsslPort     = "<RSSL Port>"
\Connections\<Connection_RSSL>\hostName        = "<ADS/Provider Hostname>"
\Connections\<Connection_RSSL>\traceMsg = false
\Connections\<Connection_RSSL>\traceMsgToFile = true
\Connections\<Connection_RSSL>\tracePing = true
\Connections\<Connection_RSSL>\traceMsgFileName   = "RSSLConsumerTrace"
\Connections\<Connection_RSSL>\traceMsgDomains = "all"
\Connections\<Connection_RSSL>\traceRespMsg = true
\Connections\<Connection_RSSL>\traceReqMsg = true
\Connections\<Connection_RSSL>\traceMsgHex = false 
\Connections\<Connection_RSSL>\traceMsgMaxMsgSize = 200000000
\Connections\<Connection_RSSL>\traceMsgMultipleFiles = true

```
Note that traceMsgFileName is the output xml file which RFA will generate under running directory. From above example, the output will be RSSLConsumerTrace_<pid>.xml where <pid> is the process id of the application.

### EMA C++ application

For EMA C++ application, user has to copy EmaConfig.xml which provided in EMA Examples folder to project directory or running directory and then add below XML to EMA configuration file under section Consumer to turn on the tracing log. Note that you have to set XmlTraceToFile to 1 to turn on the log and set it to 0 to turn off the log.

```
<DefaultConsumer value="Consumer_1"/>
<Consumer>
    <Name value="Consumer_1"/>
    ...
    <XmlTraceToFile value="1"/>
    <XmlTraceToStdout value="0"/>
</Consumer>
		
```
Though you are setting server name/ip and RSSL port in application codes and not using Channel config from the configuration file, you can also copy the configuration to the running directory and set the config under DefaultConsumer or DefaultProvider section. Above sample set DefaultConsumer to Consumer_1 then EMA internal will check the value inside the configuration file and verify option to turn on trace file from Consumer_1. And EMA will generate the RSSL Tracing log file name EmaTrace_<id>.xml under the running directory.

## Building and Running Utility



	
### Launching the application:



## Contributing

Please read [CONTRIBUTING.md](https://gist.github.com/PurpleBooth/b24679402957c63ec426) for details on our code of conduct, and the process for submitting pull requests to us.

## Authors

* **Moragodkrit Chumsri** - Release 1.0  *Initial work*


## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details
